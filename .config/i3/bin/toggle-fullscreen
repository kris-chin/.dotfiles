#!/bin/bash

#Wraps i3's split command such that it also creates a temporary file to store the state of fullscreen
#This file will be used for eww revealer purposes

FILEPATH="/tmp/i3_fullscreen"
EWW_PATH="${HOME}/.local/bin/eww"

DEFAULT_VALUE="disable"

#If the file exists, get its value, otherwise, create it 
if [ -f "$FILEPATH" ]; then
  CURRENT_VALUE=$(cat "$FILEPATH")
else
  echo "$DEFAULT_VALUE" > "$FILEPATH"
  CURRENT_VALUE="$DEFAULT_VALUE"
fi

#Set the new value 
if [ "$CURRENT_VALUE" == "disable" ]; then
  NEW_VALUE="enable"
else
  NEW_VALUE="disable"
fi

# Write the new value in the file
echo "$NEW_VALUE" > "$FILEPATH"
i3-msg fullscreen $NEW_VALUE
#Just toggle eww widgets
$EWW_PATH open-many --toggle topbar bottombar

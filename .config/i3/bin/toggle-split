#!/bin/bash

#Wraps i3's split command such that it also creates a temporary file to store the state of splitting.
#This file will be used for display on the topbar

FILEPATH="/tmp/i3_split"

DEFAULT_VALUE="horizontal"

#If the file exists, get its value, otherwise, create it 
if [ -f "$FILEPATH" ]; then
  CURRENT_VALUE=$(cat "$FILEPATH")
else
  echo "$DEFAULT_VALUE" > "$FILEPATH"
  CURRENT_VALUE="$DEFAULT_VALUE"
fi

#Set the new value 
if [ "$CURRENT_VALUE" == "horizontal" ]; then
  NEW_VALUE="vertical"
else
  NEW_VALUE="horizontal"
fi

# Write the new value in the file
echo "$NEW_VALUE" > "$FILEPATH"
i3-msg split $NEW_VALUE
